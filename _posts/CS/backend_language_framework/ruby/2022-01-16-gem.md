---
layout: post
title:
description: 'gem'
date: '2022-01-16'
categories: ruby
note: 要再參考其他的文章
---

## Introduction

quick explanation

## Why?

for practice

## How?

I am going to show the steps for myself with a gem built by myself.

### Create a gem: hello world
Steps:
1. conventions & structure
2. communicate with RubyGems.org
3. install it from RubyGems.org
4. add some code in this gem
5. add test

#### conventions & structure

The naming convention is that one Ruby file with **same name** as the gem and load it with `require 'gem_name'`; for example, a gem called `ycchen` and we are going to load it with `require ycchen` then the file structure will be as follow:
```console
$ tree

.
└── lib
    └── ycchen.rb
```

#### communicate with RubyGems

Given we have the gem file in `/lib`, if we want a standard way to install the gem as follow:
```console
$ gem build gem_name.gemspec
$ gem install gem_name-version.gem
```
then we need to follow the rules from RubyGems. Please create a file, `ycchen.gemspec` in the directory as follow:
```console
.
├── ycchen.gemspec
└── lib
    └── ycchen.rb
```
Then we can try to build it with `gem build hello.gemspec` and error pops up: `[hello.gemspec] isn't a Gem::Specification (NilClass instead)`, which means it is not a file containing `Gem::Specification`. If we keep constructing the `.gemspec` by solving the errors and warnings, a standard `.gemspec` as follow created:
```ruby
Gem::Specification.new do |s|
  s.name        = 'ycchen'
  s.version     = '0.0.0'
  s.summary     = "ycchen"
  s.description = "hello! I am ycchen"
  s.authors     = ["ycchen"]
  s.email       = ''
  s.files       = ["lib/ycchen.rb"]
  s.homepage    = 'https://rubygems.org/gems/ycchen'
  s.license     = 'MIT'
end
```
and input `gem build ycchen.gemspec` again, then success message pops up as follow:
```bash
Successfully built RubyGem
Name: ycchen
Version: 0.0.0
File: ycchen-0.0.0.gem
```

Then we can install this gem with `gem install ycchen-0.0.0.gem` and following message:
```bash
Successfully installed ycchen-0.0.0
Parsing documentation for ycchen-0.0.0
Installing ri documentation for ycchen-0.0.0
Done installing documentation for ycchen after 0 seconds
1 gem installed
```

Then we can try to require it and use the method in it with `require 'ycchen'`. Please enter `irb` and then input `require 'ycchen'` and the following:
```bash
2.7.4 :002 > require 'ycchen'
 => true
```

Given that we have account in `https://rubygems.org/`, we can setup RubyGems account in out computer with
```bash
curl -u yourname https://rubygems.org/api/v1/api_key.yaml > ~/.gem/credentials; chmod 0600 ~/.gem/credentials
```
Notice! `yourname` is the name you set on `https://rubygems.org/`

Then you can enter your password and push your gem with
```bash
$ gem push ycchen-0.0.0.gem
```
and following message:
```bash
Pushing gem to https://rubygems.org...
Successfully registered gem: ycchen (0.0.0)
```

Then you can see your gem on `https://rubygems.org/`; for example, my gem as follow: `https://rubygems.org/gems/ycchen`

#### install it from RubyGems.org

You can see the gem files on `RubyGems.org` with
```bash
$ gem list -r
```
and install it with
```bash
gem install ycchen
```
and following message pops up
```bash
Successfully installed ycchen-0.0.0
Parsing documentation for ycchen-0.0.0
Done installing documentation for ycchen after 0 seconds
1 gem installed
```

#### add some code in this gem

I am going to create ycchen and there are some interesting characteristics ycchen has:
1. guitar playing
2. web developing
3. body training

Let's build a the functions of guitar playing. We are going to construct left hand and right hand for ycchen and then import a guitar for ycchen to play on.

## What?

give an example

## Reference

[make your own gem](https://guides.rubygems.org/make-your-own-gem/)
